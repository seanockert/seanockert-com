var mobile = false;
var device = 'pc';

//Fastclick
!function(){"use strict";function a(b,d){function f(a,b){return function(){return a.apply(b,arguments)}}var e;if(d=d||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=d.touchBoundary||10,this.layer=b,this.tapDelay=d.tapDelay||200,this.tapTimeout=d.tapTimeout||700,!a.notNeeded(b)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;j>i;i++)h[g[i]]=f(h[g[i]],h);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(e=b.onclick,b.addEventListener("click",function(a){e(a)},!1),b.onclick=null)}}var b=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),g=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],d){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,g,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,g=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase(),"label"===h){if(b=this.findControl(k)){if(this.focus(k),c)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-g>100||d&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),d&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return d&&!e&&(i=k.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,d,e,f;if("undefined"==typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(d>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(g&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(b=document.querySelector("meta[name=viewport]"),b&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1)},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}();

// TwitterFetcher by Jason Mayes https://github.com/jasonmayes/Twitter-Post-Fetcher
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():b()}(this,function(){function s(b){if(null===k){for(var c=b.length,d=0,e=document.getElementById(a),f="<ul>";c>d;)f+="<li>"+b[d]+"</li>",d++;f+="</ul>",e.innerHTML=f}else k(b)}function t(a){return a.replace(/<b[^>]*>(.*?)<\/b>/gi,function(a,b){return b}).replace(/class=".*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function u(a){for(var b=a.getElementsByTagName("a"),c=b.length-1;c>=0;c--)b[c].setAttribute("target","_blank")}function v(a,b){for(var c=[],d=new RegExp("(^| )"+b+"( |$)"),e=a.getElementsByTagName("*"),f=0,g=e.length;g>f;f++)d.test(e[f].className)&&c.push(e[f]);return c}function w(a){if(void 0!==a){var b=a.innerHTML.match(/data-srcset="([A-z0-9%_\.-]+)/i)[0];return decodeURIComponent(b).split('"')[1]}}var a="",b=20,c=!0,d=[],e=!1,f=!0,g=!0,h=null,i=!0,j=!0,k=null,l=!0,m=!1,n=!0,o="en",p=!0,q=null,x={fetch:function(i){if(void 0===i.maxTweets&&(i.maxTweets=20),void 0===i.enableLinks&&(i.enableLinks=!0),void 0===i.showUser&&(i.showUser=!0),void 0===i.showTime&&(i.showTime=!0),void 0===i.dateFunction&&(i.dateFunction="default"),void 0===i.showRetweet&&(i.showRetweet=!0),void 0===i.customCallback&&(i.customCallback=null),void 0===i.showInteraction&&(i.showInteraction=!0),void 0===i.showImages&&(i.showImages=!1),void 0===i.linksInNewWindow&&(i.linksInNewWindow=!0),void 0===i.showPermalinks&&(i.showPermalinks=!0),e)d.push(i);else{e=!0,a=i.domId,b=i.maxTweets,c=i.enableLinks,g=i.showUser,f=i.showTime,j=i.showRetweet,h=i.dateFunction,k=i.customCallback,l=i.showInteraction,m=i.showImages,n=i.linksInNewWindow,p=i.showPermalinks;var r=document.getElementsByTagName("head")[0];null!==q&&r.removeChild(q),q=document.createElement("script"),q.type="text/javascript",q.src="https://cdn.syndication.twimg.com/widgets/timelines/"+i.id+"?&lang="+(i.lang||o)+"&callback=twitterFetcher.callback&suppress_response_codes=true&rnd="+Math.random(),r.appendChild(q)}},callback:function(a){var k=document.createElement("div");k.innerHTML=a.body,"undefined"==typeof k.getElementsByClassName&&(i=!1);var o=[],p=[],q=[],r=[],y=[],z=[],A=[],B=0;if(i)for(var C=k.getElementsByClassName("tweet");B<C.length;)C[B].getElementsByClassName("retweet-credit").length>0?y.push(!0):y.push(!1),(!y[B]||y[B]&&j)&&(o.push(C[B].getElementsByClassName("e-entry-title")[0]),z.push(C[B].getAttribute("data-tweet-id")),p.push(C[B].getElementsByClassName("p-author")[0]),q.push(C[B].getElementsByClassName("dt-updated")[0]),A.push(C[B].getElementsByClassName("permalink")[0]),void 0!==C[B].getElementsByClassName("inline-media")[0]?r.push(C[B].getElementsByClassName("inline-media")[0]):r.push(void 0)),B++;else for(var C=v(k,"tweet");B<C.length;)o.push(v(C[B],"e-entry-title")[0]),z.push(C[B].getAttribute("data-tweet-id")),p.push(v(C[B],"p-author")[0]),q.push(v(C[B],"dt-updated")[0]),A.push(v(C[B],"permalink")[0]),void 0!==v(C[B],"inline-media")[0]?r.push(v(C[B],"inline-media")[0]):r.push(void 0),v(C[B],"retweet-credit").length>0?y.push(!0):y.push(!1),B++;o.length>b&&(o.splice(b,o.length-b),p.splice(b,p.length-b),q.splice(b,q.length-b),y.splice(b,y.length-b),r.splice(b,r.length-b),A.splice(b,A.length-b));for(var D=[],B=o.length,E=0;B>E;){if("string"!=typeof h){var F=q[E].getAttribute("datetime"),G=new Date(q[E].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]),H=h(G,F);if(q[E].setAttribute("aria-label",H),o[E].innerText)if(i)q[E].innerText=H;else{var I=document.createElement("p"),J=document.createTextNode(H);I.appendChild(J),I.setAttribute("aria-label",H),q[E]=I}else q[E].textContent=H}var K="";c?(n&&(u(o[E]),g&&u(p[E])),g&&(K+='<div class="user"><strong>'+t(p[E].innerHTML)+"</strong> says:</div>"),f&&(K+='<div class="timePosted">'+q[E].getAttribute("aria-label")+'</div><div class="clear"></div>'),K+='<p class="tweet">'+t(o[E].innerHTML)+"</p>"):o[E].innerText?(g&&(K+='<div class="user"><strong>'+p[E].innerText+"</strong> says:</div>"),f&&(K+='<div class="timePosted">'+q[E].innerText+'</div><div class="clear"></div>'),K+='<p class="tweet">'+o[E].innerText+"</p>"):(g&&(K+='<div class="user"><strong>'+p[E].textContent+"</strong> says:</div>"),f&&(K+='<div class="timePosted">'+q[E].textContent+'</div><div class="clear"></div>'),K+='<p class="tweet">'+o[E].textContent+"</p>"),l&&(K+='<p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to='+z[E]+'" class="twitter_reply_icon"'+(n?' target="_blank">':">")+'Reply</a><a href="https://twitter.com/intent/retweet?tweet_id='+z[E]+'" class="twitter_retweet_icon"'+(n?' target="_blank">':">")+'Retweet</a><a href="https://twitter.com/intent/favorite?tweet_id='+z[E]+'" class="twitter_fav_icon"'+(n?' target="_blank">':">")+"Favorite</a></p>"),m&&void 0!==r[E]&&(K+='<div class="media"><img src="'+w(r[E])+'" alt="Image from tweet" /></div>'),D.push(K),E++}s(D),e=!1,d.length>0&&(x.fetch(d[0]),d.splice(0,1))}};return window.twitterFetcher=x,x});

// Pretty date
function prettyDate(a){var b=new Date((a||"").replace(/-/g,"/").replace(/[TZ]/g," ")),c=((new Date).getTime()-b.getTime())/1e3,d=Math.floor(c/86400);if(!(isNaN(d)||0>d||d>=62))return 0==d&&(60>c&&"just now"||120>c&&"1 minute ago"||3600>c&&Math.floor(c/60)+" minutes ago"||7200>c&&"1 hour ago"||86400>c&&Math.floor(c/3600)+" hours ago")||1==d&&"Yesterday"||7>d&&d+" days ago"||31>d&&Math.ceil(d/7)+" weeks ago"}

$(document).ready( function() {
  
  loadLatestTweets();  
  console.log('g');
  
  $('.slick').slick({
    centerMode: true,
    centerPadding: '20%',
    slidesToShow: 1,
    focusOnSelect: true,
    infinite: true,
    initialSlide: 1,
    arrows: true,
    responsive: [
      {
        breakpoint: 768,
        settings: {
          arrows: true,
          centerMode: true,
          centerPadding: '10%',
          slidesToShow: 1
        }
      },
      {
        breakpoint: 480,
        settings: {
          arrows: true,
          centerMode: true,
          centerPadding: '10%',
          slidesToShow: 1
        }
      }
    ]
  });

  FastClick.attach(document.body);       
  

});

function loadLatestTweets(){
  var config = {
    "id": '661349740131446784',
    "domId": 'tweet',
    "maxTweets": 4,
    "enableLinks": true,
    //"dateFunction": dateFormatter,
    "showInteraction": false,
    "showImages": true
  };
  
  function dateFormatter(date) {
    return prettyDate(date.toISOString());
  }
  twitterFetcher.fetch(config);
}

